---
name: vibe-code-review
description: "阶段/任务完成后的代码评审流程，输出评审记录并更新状态。"
---

# 代码评审

## 核心流程

- 宣告："使用 vibe-code-review 进行代码评审。"
- 适用场景：每阶段完成后、重要任务完成后、合并前。
- 读取 `requirements/<feature>/tasks.md` 与 `requirements/<feature>/status.md`，确认当前评审节点（CRxx）。
- 收集评审输入（见下方清单）。
- 输出评审结果到 `requirements/<feature>/reviews/CRxx.md`，模板为 `skills/_templates/code-review.md`。
- 如有反馈项，遵循本文内嵌的反馈处理规则逐条处理；修复后补充测试证据并更新评审结论，默认需要在同一轮内修到“通过”。
- 完成后勾选 `tasks.md` 中对应 CR 项，更新 `status.md`，并提交一次 git commit。

## 评审输入清单

- 变更目标与要求来源（spec/任务编号）。
- git base/head（或目标分支与当前提交）。
- diff 范围（涉及的文件/模块）。
- 测试证据（命令、结果、失败项）。
- 风险提示（兼容性/回滚/未知项）。

## 反馈处理规则（内嵌）

- 先完整阅读反馈，再行动。
- 不做表演式认同；只做技术性回应或直接修复。
- 不清楚的反馈先澄清，避免部分理解就实施。
- 先处理阻塞/高风险问题，再处理简单项与复杂项。
- 一次只修一个问题，修完即验证。
- 若反馈与事实不符或违反 YAGNI，应提出技术性反驳与证据。
- 如反馈涉及架构冲突或与既定决策冲突，先停下并请求确认。

### 禁止用语

- “你说得对/非常好/感谢提醒”等表演式语句。
- 未验证就承诺“我马上修”。

### 正确回应方式

- “已核对 X，问题为 Y，已在 Z 修复并补充测试。”
- “该建议会破坏现有兼容性，理由是 ...，是否确认调整？”
